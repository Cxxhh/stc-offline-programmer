================================================================
           Keil MDK-ARM 工程文件添加清单
================================================================

链接错误分析：
-----------------
错误：Undefined symbol bsp_sdcard_init, bsp_sdcard_detect
解决：添加 BSP/bsp_sdcard.c

错误：Undefined symbol bsp_spi_dma_*_callback
解决：添加 BSP/bsp_spi.c

错误：Undefined symbol f_mount, f_open, f_close, f_read, f_write
解决：添加 FatFS/src/ff.c, diskio.c, diskio_sdcard.c

================================================================
                    需要添加的源文件
================================================================

【BSP组】- 在Keil工程树中创建 "BSP" 组，添加：
  ✓ BSP/bsp_spi.c
  ✓ BSP/bsp_sdcard.c

【FatFS组】- 在Keil工程树中创建 "FatFS" 组，添加：
  ✓ FatFS/src/ff.c
  ✓ FatFS/src/diskio.c
  ✓ FatFS/src/diskio_sdcard.c

================================================================
                  需要添加的头文件路径
================================================================

在工程选项 → C/C++ → Include Paths 中添加：

  ..\BSP
  ..\FatFS\src

================================================================
                      操作步骤
================================================================

步骤1：添加BSP组和源文件
  1. 在Keil工程树中右键点击工程名
  2. 选择 "Add Group..."
  3. 输入组名 "BSP"
  4. 右键 "BSP" 组 → "Add Existing Files to Group..."
  5. 导航到 BSP 文件夹
  6. 同时选择 bsp_spi.c 和 bsp_sdcard.c
  7. 点击 "Add"

步骤2：添加FatFS组和源文件
  1. 右键工程名 → "Add Group..."
  2. 输入组名 "FatFS"
  3. 右键 "FatFS" 组 → "Add Existing Files to Group..."
  4. 导航到 FatFS/src 文件夹
  5. 选择 ff.c, diskio.c, diskio_sdcard.c
  6. 点击 "Add"

步骤3：添加头文件路径
  1. 右键工程名 → "Options for Target..."
  2. 切换到 "C/C++" 标签页
  3. 在 "Include Paths" 框中点击 "..."
  4. 点击 "New" 添加新路径
  5. 输入或浏览选择：..\BSP
  6. 再次点击 "New" 添加：..\FatFS\src
  7. 点击 "OK"

步骤4：重新编译
  1. 点击 "Rebuild" 或按 F7
  2. 检查输出窗口确认没有错误

================================================================
                      验证清单
================================================================

编译前检查：
  □ BSP组已创建
  □ bsp_spi.c 已添加
  □ bsp_sdcard.c 已添加
  □ FatFS组已创建
  □ ff.c 已添加
  □ diskio.c 已添加
  □ diskio_sdcard.c 已添加
  □ 头文件路径 ..\BSP 已添加
  □ 头文件路径 ..\FatFS\src 已添加

编译后应该：
  □ 0 Errors
  □ 0 Warnings（或仅有少量警告）
  □ 可以成功生成 .hex 或 .bin 文件

================================================================

